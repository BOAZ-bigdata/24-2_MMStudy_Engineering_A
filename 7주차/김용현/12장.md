# 12장 카프카 운영하기

### 12.5.1 선호 레플리카 선출
리더 레플리카는 목록에 있는 첫 번째 인-싱크 레플리카로 정의된다.
리더 레플리카 재선출 시 이전 리더 역할을 하던 레플리카가 돌아오더라도 해당 레플리카로 자동 복구되지 않는다.

이에, 선호 레플리카 선출 옵션을 켜놓거나 크루즈 컨트롤 같은 외부 오픈 소스 툴을 이용하는 것이 권장된다.

### 클러스터에서 토픽을 삭제하는 순서
1. 클러스터의 모든 브로커를 내린다.
2. 주키퍼의 카프카 클러스터 설정 노드 아래에서 /brokers/topics/{topic}을 삭제한다. 자식 노드를 먼저 삭제해야 한다는 점에 유의
3. 각 브로커의 로그 디렉토리에서 토픽에 해당하는 파티션의 디렉토리를 삭제한다.
4. 모든 브로커를 재시작한다.


# 11장 보안 
보안은 가장 강력하고 또 최신인 기능을 사용하는 것이 언제나 선호되지만 보안을 향상시키려면 많은 비용이 드니까 어느 정도의 절충이 필요하다

## 보안 설정 적용하기
- 인증: 사용자가 누구인지 식별한다
- 인가: 사용자가 무엇을 할 수 있는지 결정
- 암호화: 누설과 위조로부터 데이터 보호
- 감사: 사용자가 무엇을 했는지 추적
- 쿼터: 자원을 얼마나 많이 사용할 수 있는 지 조절

## 보안 프로토콜
카프카 브로커에 1개 이상의 엔드포인트를 가진 리스너 설정이 있는데, 클라이언트로부터의 연결을 받는 것이 바로 이 리스너다.
각각의 리스너는 각자의 보안 설정을 가질 수 있다

카프카는 TLS, SASL을 사용해서 4개의 보안 프로토콜을 지원한다.

TLS: 이전 버전의 이름인 SSL로도 불리고, 서버와 클라이언트 사이의 인증 뿐만 아니라 암호화도 지원

-> 사설 네트워크 안에서 인증이나 암호화가 필요없을 정도로 민감하지 않은 데이터를 처리할 때만 적합

-> 인터넷에서 가장 많이 사용되는 암호화 프로토콜 중 하나

SASL: 연결 지향 ㅍ로토콜에서 서로 다른 메커니즘을 사용한 인증을 지원하는 프레임워크

각 카프카 보안 프로토콜은 전송 계층(PAINTEXT, SSL)과 인증 계층(SSL, SASL)을 조합해서 정외됨

SASAL_PLAINTEXT: 암호화는 진행하지 않기 때문에 사설 네트워크 안에서만 적합

SASL_SSL: 암호화 뿐만 아니라 클라이언트/서버 인증도 지원되기 때문에 안전하지 않은 네트워크에서 적합

## 인증
서버와 클라이언트의 사이에서 서로의 신원을 확인하는 과정

-> 카프카 브로커와 클라이언트 간의 통신이 시작될 떄 신원을 파악하는 과정

`SSL/TLS:` 클라이언트와 브로커 간의 안전한 통신을 보장한다. 이를 통해 메시지가 중간에서 탈취되는 것을 방지하며, 양쪽이 서로의 신원을 확인하는 데 사용된다.

`SASL/PLAIN`: 사용자 이름과 비밀번호를 사용한 간단한 인증 방법

`SASL/SCRAM`: 비밀번호 기반 인증을 강화함

`ASL/GSSAPI `(Kerberos): 케르베로스를 사용하는 강력한 인증 방식으로, 대규모 엔터프라이즈 환경에서 자주 사용됨. Kerberos는 중앙화된 인증 서버를 통해 사용자를 인증하고, 인증된 사용자에게 티켓을 발급하여 통신을 보호함

## 인가
인가는 사용자가 자원에 대해 어떠한 작동을 수행할 수 있는지를 결정하는 절차
인증된 클라이언트가 특정 작업을 수행할 수 있는 권한을 관리

카프카 브로커는 ACL을 사용해서 인가를 관리함.

ACL은 사용자가 특정 리소스(토픽, 컨슈머 그룹 등)에 대해 허용된 작업(읽기, 쓰기, 삭제 등)을 정의하는 규칙

관리자는 주어진 사용자 또는 애플리케이션이 Kafka 클러스터 내에서 수행할 수 있는 작업을 세부적으로 제어할 수 있다.

카프카 기본 인가 전략: : 카프카에서는 기본적으로 DENY가 우선 적용된다. 즉, 특정 리소스에 대해 명시적으로 허가되지 않으면 기본적으로 접근이 거부된다는 뜻.
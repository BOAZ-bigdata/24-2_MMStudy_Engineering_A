# SQS(Message queue)사례
## 채널톡 사례
![alt text](image.png)
- 순간적으로 많은 로그를 Dynamodb에 저장하려고하면 부하가 발생하여 정상적으로 저장이 안될 수 있다. -> SQS로 버퍼역할을 했다. 
- SQS는 무한히 많은 메세지를 저장할 수 있고 14일동안 보관 가능하여 publish 먼저 한 뒤 consume을 나중에 하더라도 문제가 되지 않았다.
- 개발팀에서 메인 api가 문제가 생겨 긴급하게 대응을 해야한다면 덜 중요한 log-writer은 더 여유롭게 대응할 수 있었다.
- SQS는 비정상적인 오류로 종료되더라도 안전하게 재시도 가능해서 EC2 Spot Instance로 동작해도 괜찮았다. 
<br >**Spot Instance: 가격이 비교적 저렴한 대신 경매하는 방식이라 갑자기 종료될 수 있다.**
## 직방 사례 (S3 & RDS & SQS 통한 고가용성 데이터 베이스 관리 및 운영)
![image](https://github.com/user-attachments/assets/aba89121-6ab9-4639-a0ac-38c8263d0dcb)
- S3를 통해 사용자 및 부동산 중개 사무소등의 정보를 저장하고, RDS를 이용해 관계형 데이터 베이스를 쉽게 운영할 수 있다.
- 또한 SQS를 이용함으로써, 기존에 모든 트랜잭션을 데이터 베이스에 의존했지만, 구성요소를 독립적으로 실행해 데이터 베이스에 문제가 생겼을때도 모든 거래를 안전하게 처리할 수 있다.
